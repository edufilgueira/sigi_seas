<%- model_class = MapaDeBordo -%>
<% content_for :title do %>
<%=  I18n.t('activerecord.models.mapa_de_bordo', default: MapaDeBordo.model_name.human.pluralize.titleize) %>
<% end -%>

<div class="row">
  <div class="col-lg-12">
    <div class="ibox float-e-margins">
      <div class="ibox-title">
        <h5><%=  I18n.t('activerecord.models.mapa_de_bordo', default: MapaDeBordo.model_name.human.pluralize.titleize) %></h5>
        <div class="ibox-tools">
          <a class="collapse-link">
            <i class="fa fa-chevron-up"></i>
          </a>
          <a class="close-link">
            <i class="fa fa-times"></i>
          </a>
        </div>
      </div>
      <div class="ibox-content">
        <div class="row">
          <div class="col-sm-12 b-r">
            <%= render partial: 'manager' %>
            <%= link_to_new new_mapa_de_bordo_path %>
            <table class="table table-hover table-sm">
              <thead>
                <tr>  
                      <th><%= model_class.human_attribute_name(:id) %></th>
                      <th><%= model_class.human_attribute_name(:veiculo) %></th>
                      <th><%= model_class.human_attribute_name(:tipo_vistoria) %></th>
                      <th><%= model_class.human_attribute_name(:data_vistoria) %></th>
                      <th><%= model_class.human_attribute_name(:responsavel) %></th>
                      <th><%= model_class.human_attribute_name(:motorista) %></th>
                      <th><%= model_class.human_attribute_name(:km_inicial) %></th>
                      <th><%= model_class.human_attribute_name(:hora_inicial) %></th>
                      <th><%= model_class.human_attribute_name(:km_final) %></th>
                      <th><%= model_class.human_attribute_name(:hora_final) %></th>
                      <th><%= model_class.human_attribute_name(:percurso) %></th>
                      <th><%= model_class.human_attribute_name(:parecer) %></th>
                      <th width="18%"><%= I18n.t('helpers.actions') %></th>
                </tr>
              </thead>
              <tbody>
                <% if !@consulta_mapas.blank? %>
                  <% @consulta_mapas.each do |mapa_de_bordo| %>
                    <tr>
                      <td><%= mapa_de_bordo.id %></td>                
                      <td><%= mapa_de_bordo.veiculo %></td>
                      <td><%= mapa_de_bordo.tipo_vistoria %></td>
                      <td><%= mapa_de_bordo.data_vistoria %></td>
                      <td><%= mapa_de_bordo.responsavel %></td>
                      <td><%= mapa_de_bordo.motorista %></td>
                      <td><%= mapa_de_bordo.km_inicial %></td>
                      <td><%= mapa_de_bordo.hora_inicial&.strftime('%H:%M') %></td>
                      <td><%= mapa_de_bordo.km_final %></td>
                      <td><%= mapa_de_bordo.hora_final&.strftime('%H:%M') %></td>
                      <td><%= mapa_de_bordo.percurso %></td>
                      <td><%= mapa_de_bordo.parecer %></td>
                      <td>
                        <%= link_to_show(mapa_de_bordo) %>
                        <%= link_to_edit(edit_mapa_de_bordo_path(mapa_de_bordo)) %>
                        <%= link_to_delete(mapa_de_bordo) %>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <%= link_to '<i class="fas fa-print"></i> '.html_safe, imprimir_mapa_bordo_mapa_de_bordo_path(mapa_de_bordo.id), class: "btn btn-outline btn-success btn-sm", target: '_blank', title: "Imprimir" %>
                        <%= link_to '<i class="fas fa-check"></i> '.html_safe, finalizar_mapa_de_bordo_path(mapa_de_bordo.id), class: "btn btn-outline btn-primary btn-sm", title: "Finalizar" %>
                      </td> 
                    </tr>
                  <% end %>
                <% else %>
                  <% @mapas.each do |mapa_de_bordo| %>
                    <tr>
                      <td><%= mapa_de_bordo.id %></td>                
                      <td><%= mapa_de_bordo.veiculo %></td>
                      <td><%= mapa_de_bordo.tipo_vistoria %></td>
                      <td><%= mapa_de_bordo.data_vistoria %></td>
                      <td><%= mapa_de_bordo.responsavel %></td>
                      <td><%= mapa_de_bordo.motorista %></td>
                      <td><%= mapa_de_bordo.km_inicial %></td>
                      <td><%= mapa_de_bordo.hora_inicial&.strftime('%H:%M') %></td>
                      <td><%= mapa_de_bordo.km_final %></td>
                      <td><%= mapa_de_bordo.hora_final&.strftime('%H:%M') %></td>
                      <td><%= mapa_de_bordo.percurso %></td>
                      <td><%= mapa_de_bordo.parecer %></td>
                      <td>
                        <%= link_to_show(mapa_de_bordo) %>
                        <%= link_to_edit(edit_mapa_de_bordo_path(mapa_de_bordo)) %>
                        <%= link_to_delete(mapa_de_bordo) %>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <%= link_to '<i class="fas fa-print"></i> '.html_safe, imprimir_mapa_bordo_mapa_de_bordo_path(mapa_de_bordo.id), class: "btn btn-outline btn-success btn-sm", target: '_blank', title: "Imprimir" %>
                        <%= link_to '<i class="fas fa-check"></i> '.html_safe, finalizar_mapa_de_bordo_path(mapa_de_bordo.id), class: "btn btn-outline btn-primary btn-sm", title: "Finalizar" %>
                      </td> 
                    </tr>
                  <% end %>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
