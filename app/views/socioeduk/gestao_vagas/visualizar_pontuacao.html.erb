<%- model_class = Socioeduk::Processo -%>
<% content_for :title do %>
<%=  I18n.t('activerecord.models.socioeduk_processo', default: Socioeduk::Processo.model_name.human.pluralize.titleize) %>
<% end -%>

<div class="row">
  <div class="col-lg-12">
    <div class="ibox float-e-margins">
      <div class="ibox-title">
        <!-- <h5><%=  I18n.t('activerecord.models.socioeduk_processo', default: Socioeduk::Processo.model_name.human.pluralize.titleize) %></h5> -->
        <div class="ibox-tools">
          <a class="collapse-link">
            <i class="fa fa-chevron-up"></i>
          </a>
          <a class="close-link">
            <i class="fa fa-times"></i>
          </a>
        </div>
      </div>
      <div class="ibox-content">
        <h1><%= I18n.t('titles.socioeduk_gestao_vagas_visualizar_pontuacao') %></h1>
        <div class="row">
          <div class="col-sm-12 b-r">
          <button type="button" class="btn btn-primary">
            Capacidade Real <span class="badge badge-light"><%= @capacidade_real %></span>
          </button>
            <table class="table table-hover table-sm">
              <thead>
                <tr>
                  <th style="text-align: left; width: 35px;">#</th>
                  <th style="text-align: left;">Nomes</th>
                  <th style="text-align: left;">Nome da Mãe</th>
                  <th style="text-align: left;">Data Apreensão</th>
                  <th style="text-align: left;">Tempo em Cumprimento</th>
                  <th style="text-align: left;">Última Medida</th>
                  <th style="text-align: left;">Pontuação</th>
                </tr>
              </thead>
              <tbody>
                <% count = 0 %>
                <% @socioeduk_processos.each do |socioeduk_processo| %>
                <% count += 1 %>
                <tr>
                  <% if(count <= @capacidade_real) %>
                    <td style="text-align: left;"><%= count %></td>
                    <td style="text-align: left;"><%= socioeduk_processo[:nome] %></td>
                    <td style="text-align: left;"><%= socioeduk_processo[:nome_mae] %></td>
                    <td style="text-align: left;"><%= socioeduk_processo[:data_hora_apreensao].strftime('%d/%m/%Y') %></td>
                    <td style="text-align: left;"><%= time_diff_in_natural_language((Date.today + 1), Date.parse(socioeduk_processo[:data_hora_apreensao].strftime('%d-%m-%Y'))) %></td>
                    <td style="text-align: left;"><%= socioeduk_processo[:medida_socioeducativa] %></td>
                    <td style="text-align: left;"><%= number_with_precision(socioeduk_processo[:pontuacao], separator: '.', precision: 2) %></td>
                  <% else %>
                    <td style="text-align: left; color: #900;"><%= count %></td>
                    <td style="text-align: left; color: #900;"><%= socioeduk_processo[:nome] %></td>
                    <td style="text-align: left; color: #900;"><%= socioeduk_processo[:nome_mae] %></td>
                    <td style="text-align: left; color: #900;"><%= socioeduk_processo[:data_hora_apreensao].strftime('%d/%m/%Y') %></td>
                    <td style="text-align: left; color: #900;"><%= time_diff_in_natural_language((Date.today + 1), Date.parse(socioeduk_processo[:data_hora_apreensao].strftime('%d-%m-%Y'))) %></td>
                    <td style="text-align: left; color: #900;"><%= socioeduk_processo[:medida_socioeducativa] %></td>
                    <td style="text-align: left; color: #900;"><%= number_with_precision(socioeduk_processo[:pontuacao], separator: '.', precision: 2) %></td>
                  <% end %>
                </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
